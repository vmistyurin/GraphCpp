\documentclass{article}
\usepackage[T2A,T1]{fontenc}
\usepackage[cp1251]{inputenc}
\usepackage[english, russian]{babel}
\usepackage{graphicx}
\usepackage{makeidx}
\usepackage{latexsym}
\usepackage{amssymb,amsmath,amsfonts,floatflt}
\usepackage{srcltx}
\usepackage{cite}
\usepackage{geometry}
\usepackage{ucs}
\usepackage{cmap}
\usepackage{pdfpages}
\usepackage{epstopdf}
\usepackage[14pt]{extsizes}
	
\linespread{1.6}
\usepackage{geometry}
\geometry{left=3cm}
\geometry{right=1.5cm}
\geometry{top=2cm}	
\geometry{bottom=2.2cm}
%\topmargin=-30pt
%\textheight= 630pt
\author{Мистюрин В. В.}
\title{Расчёт и оптимизация потоков в ненадёжных сетях}
\date{}

\begin{document}
\setcounter{page}{2}
\thispagestyle{empty}
\tableofcontents

\section{Введение}
В данной работе рассматривается такой показатель надёжности сети, как матрица математических ожиданий величин максимальных потоков между всеми парами узлов в сети. Точный расчёт этого показателя требует полного перебора всех возможных вариантов разрушений сети, а следовательно является NP-трудной задачей и, как следствие, сопряжён с большими временными и вычислительными трудностями и требует разработки новых алгоритмов.

При рассмотрении задач, связанных с надёжностью сетей, сеть обычно описывается случайным графом, где рёбра отображают сетевые каналы, а в качестве узлов выступают сенсоры, серверы, переключатели и другие устройства. В нашем случае, в качестве узлов будут выступать рабочие станции, а в качестве рёбер - различные виды связей между ними. Узлы сети мы будем считать абсолютно надёжными, соединения же подверженными отказам.

\subsection{Актуальность работы}
Различные виды сетей активно применяются для изучения вулканов\cite{Werner}, военного наблюдения \cite{Kikiras}, среды обитания\cite{Szewczyk}.

Для различных видов сетей можно по разному трактовать значение исследуемого показателя надёжности, например:
\begin{enumerate}
	\item Для информационных сетей - количество информации, которое мы можем передать между любой парой узлов.
	\item Для транспортных сетей - количество грузов, которое мы можем перевезти между любой парой узлов.
\end{enumerate}

В данной работе объектом исследования является система сетевой структуры, в которой в качестве модели используется случайный граф с абсолютно надёжными вершинами, моделирующими узлы, и ненадёжными рёбрами, моделирующими связи в сети. Пропускные способности каналов считаем одинаковыми в обоих направлениях, поэтому граф считаем неориентированным.

В качестве предмета исследования выбран такой показатель надёжности сети как матрица математических ожиданий величин максимальных потоков между всеми парами узлов в сети и соответствующее арифметическое среднее.

\subsection{Цель магистерской работы}
Целью магистерской работы является разработка и реализация алгоритма точного расчёта описанного показателя.
Алгоритм должен абсолютно точно вычислять искомый показатель и завершаться за разумное время для как можно больших размерностей графов.

Для достижения указанной цели были поставлены следующие задачи:
\begin{enumerate}
	\item Разработать точный алгоритм расчёта искомого показателя надёжности, завершающийся за разумное время.
	\item Разработать и исследовать различные методы ускорения.
	\item Реализовать алгоритм с помощью средств языка \verb|С++|.
	\item Реализовать параллельную версию алгоритма.
\end{enumerate}

Методы исследования базируются на теории вероятностей и теории графов. Языком реализации выбран \verb|С++| для последующей адаптации и тестирования алгоритмов на кластере.
Практическая значимость заключается в возможности точного расчёта указанного показателя надёжности, что в свою очередь позволяет ускорить и улучшить процесс проектирования надёжных сетей.

\subsection{Цель курсовой работы}
Целью курсовой работы является точное вычисление матрицы величин максимальных потоков между всеми парами узлов в надёжной сети.

Для достижения указанной цели, были поставленны следующие задачи:
\begin{enumerate}
	\item Разработать точный алгоритм, вычисляющий искомую величину.
	\item Реализовать и исследовать влияние различных методов ускорения.
	\item Реализовать алгоритм с помощью средств языка \verb|С++|.
\end{enumerate}

\section{Определения и обозначения}
Используется модель неориентированного графа.
Введем обозначения:
\begin{description}
	\item[$G(V,E)$] -- неориентированный граф с множеством вершин $V$ и
	множеством ребер $E$.
	\item[$c_{ij}$] -- вес ребра между вершинами $i$ и $j$.
	\item[$f_{ij}$] -- величина максимального потока между $i$ и $j$.
\end{description}

\section{Потоки в графах}

Впервые задача о максимальном потоке была сформулирована в 1951 году Джорджем Данцигом. В 1955 году Лестер Форд и Делберт Фалкерсон впервые построили алгоритм для решения этой задачи. В течение последующих лет  интерес к ней подогревался высокой практической значимостью и её применимостью при исследовании информационных и транспортных сетей. В 1970 году был опубликован частный случай алгоритма Форда-Фалкерсона, именуемый алгоритмом Эдмонда-Карпа. В 1986 году Гольдбергом  и Тарьяном был опубликован алгоритм проталкивания предпотока. В дальнейшем решение задачи многократно улучшалось.

\subsection{Определение}

Прежде всего, необходимо ввести понятие потока.

Выделим две вершины в графе: источник, который будем обозначать $s$, и сток, который будем обозначать буквой $t$.

Поток - функция $f: V \times V \rightarrow  \mathbb{R}$ со следующими свойствами для любых вершин $u$ и $v$:
\begin{enumerate}
	\item Ограничение пропускной способности -- поток не может превысить пропускную способность:  $f(u, v) \leqslant c(u, v)$.
	\item Антисимметричность -- поток из $u$ в $v$ должен быть противоположен потоку из $v$ в $u$ : $f(u, v) = -f(v, u)$.
	\item Сохранение потока -- $ \sum\limits_{w \in V} f(w, v) = 0$ для всех $w \in V \setminus \{s, t\}$.
\end{enumerate}

Величина потока -- сумма потоков из источника $ |f| = \sum\limits_{v \in V} f(s, v) $.

Максимальный поток между $u$ и $v$ -- такой поток $f$, что его величина максимальна.

\subsection{Стандартные алгоритмы}
Наиболее стандартными алгоритмами вычисления максимального потока являются алгоритмы Эдмондса-Карпа, Диница\cite{Dinic} и проталкивания предпотока\cite{Goldberg}. Асимптотическая сложность этих алгоритмов $O(|V|*|E|^2), O(|V|^2*|E|), O(|V|^2*|E|)$ соответственно. Несмотря на то, что сложность алгоритма Эдмондса-Карпа растёт быстрее, он более эффективно расходует память, что может положительно сказаться на производительности.

\section{Методы ускорения расчёта}
Методы ускорения расчёта различных показателей надёжности, как правило, сводятся к декомпозиции, редукции цепей и висячих вершин, а также рассмотрения других особенностей структур (наличие мостов, и точек сочленения, специальный вид графа, например, циклы или деревья и пр.) \cite{Migov,Rodionovy,Shooman}. При этом возможность использования данных методов и их сложность существенно зависят от рассматриваемых показателей.
 
Так как исследуемые графы являются неориентированными, то поток в одну сторону равен потоку в другую, следовательно, итоговая матрица будет симметрична и нет необходимости считать поток между всеми парами - достаточно посчитать потоки для пар, находящихся над диагональю матрицы.

\subsection{Разделение графа на несколько компонент связности} \label{C:Split}
Исходный граф может иметь несколько компонент связности. Очевидно, между парами вершин в разных компонентах связности поток равен нулю. Таким образом, можно извлечь из графа его компоненты связности, найти потоки внутри них и затем собрать ответ из этих частей, предполагая, что между компонентами связности величины потоков равны нулю.

\begin{figure}[h!tb]
 	\centering
	\includegraphics[width=0.3\textwidth]{pic//disconnected_components.png}
 	\caption{Разделение графа на несколько компонент связности}\label{F:disconnected_components}
\end{figure}

Например, на графe, представленном на рисунке \ref{F:disconnected_components}, $f_{ij} = 0$ для $i \in \{0, 1, 2\}, j \in \{3, 4\}$, так как эти вершины находятся в разных компонентах связности.

\subsection{Стягивание цепи} \label{C:Chain}
В этом параграфе мы будем следовать обозначениям, введённым на рисунке \ref{F:chain} -- $i_0$, $i_1$...$i_m$ - вершины цепи, пронумерованные в порядке следования, $u$ и $v$ - любые вершины в графе, не обязательно не принадлежащие цепи.

\begin{figure}[h!tb]
	\centering
	\includegraphics[width=0.6\textwidth]{pic//chain.png}
	\caption{Разделение графа на несколько компонент связности}\label{F:chain}
\end{figure}

При обнаружении цепи в графе мы можем применить следующую редукцию: заменить обнаруженную цепь на ребро, пропускная способность равна минимальной пропускной способности всех ребёр цепи, затем посчитать величины потоков в получившемся графе. Чтобы величину максимального потока между парой вершин в исходном графе, нужно рассмотреть следующие случаи:
\begin{enumerate}
	\item Обе вершины не находятся в цепи.
	\item Одна вершина находится в цепи, другая нет.
	\item Обе вершины находятся в цепи.
\end{enumerate}

1. Если обе вершины не находятся в цепи, то величина максимального потока между ними равна величине максимального потока между этими вершинами в преобразованном графе.

2. Если одна вершина (например $i_p$) находится в цепи, а другая нет, то величина максимального потока между ними равен сумме величин двух потоков - величине потока, который можно доставить до $i_p$ с одной стороны, который равен $\min(f_{vi_0}, \min\limits_{j \in [0...p-1]} c_{i_ji_{j+1}})$ и величине потока, который можно доставить с другой стороны, равной $\min(f_{vi_m}, \min\limits_{j \in [p...m-1]} {c_{i_ji_j+1}})$.
	
3. Если обе вершины (например $i_p$ и $i_k$, $p < k$) находятся в цепи, то величина максимального потока между ними равна сумме двух величин потоков: величине максимального потока, который можно доставить по цепи, равная $\min\limits_{j \in [p..k]}c_{ij}$, и величине максимального потока, который можно доставить через остальной граф, равная 
$\min(\min\limits_{j \in [0, p-1]}c_{i_ji_{j+1}}, f_{i_0i_m}, \min\limits_{j \in [k, m-1]}c_{i_ji_{j+1}})$.

\subsection{Обработка мостов} \label{C:Bridge}
Мостом называется такое ребро, удаление которого увеличивает число компонент связности.
При обнаружении моста в графе (например, между вершинами $i$ и $j$, как на рисунке \ref{F:bridge}) мы можем провести следующую редукцию: разделить на граф на два подграфа, разделённые мостом и посчитать потоки внутри этих подграфов. Чтобы получить величины потоков в исходном графе, нужно перебрать все пары вершин и рассмотреть два случая:

\begin{enumerate}
	\item Обе вершины лежат в одном подграфе.
	\item Вершины лежат в разных подграфах.
\end{enumerate}

Если обе вершины лежат в одном подграфе, то величина потока между ними равна величине потока в этом подграфе.
Если вершины лежат в разных подграфах (например $u$ в первом, $v$ во втором), то величина максимального потока между ними равна минимуму из величины максимального потока от $u$ до моста, пропускной способности моста и величине потока от моста до $v$, т.е. $f_{uv} = \min(f_{ui}, c_{ij}, f_{jv})$.

\begin{figure}[h!tb]
	 \centering
	\includegraphics[width=0.4\textwidth]{pic//bridge.png}
	\caption{Мост в графе}\label{F:bridge}
\end{figure}

\subsection{Удаление висячих вершин} \label{C:Hanged}
Висячие вершины (вершины степени 1) могут быть обработаны следующим	образом: удалим вершину и посчитаем величины потоков в оставшемся графе. Чтобы восстановить величины максимальных потоков в исходном графе, нужно рассмотреть два случая:
\begin{enumerate}
\item Обе вершины не являются висячими.
\item Одна вершина висячая, вторая нет.
\end{enumerate}

Если обе вершины не висячие, то наличие висячей вершины никак не влияет на поток между ними, а следовательно величина потока между ними равна величине потока между ними в графе с удалённой висячей вершиной.

\begin{figure}[h!tb]
	\centering
	\includegraphics[width=0.4\textwidth]{pic//hanged.png}
	\caption{Висячая вершина}\label{F:hanged}
\end{figure}

Если одна вершина является висячей, а вторая нет, то величина потока между ними равна минимуму величины потока до опорной вершины и пропускной способности опорного ребра, то есть, следуя обозначениям из рисунка  \ref{F:hanged}, $f_{ui} = \min(f_{uj},c_{ij})$

\section{Реализация алгоритмов и численные эксперименты}

\subsection{Алгоритм перебора пар}
Простейшая версия алгоритма заключается в следующем: будем перебирать пары вершин, учитывая симметричность потоков, и считать величину максимального потока между ними с помощью стандартных алгоритмов.

\subsection{Алгоритм с использованием редукций}
Алгоритм с использованием редукций будет применять редукции следующим образом:

\begin{enumerate}
	\item Разделяем граф на несколько компонент связности (описано в пункте \ref{C:Split}).
	\item Стягиваем цепи (описано в пункте \ref{C:Chain}).	
	\item Обрабатываем мосты (описано в пункте \ref{C:Bridge}).
	\item Удаляем висячие вершины (описано в пункте \ref{C:Hanged}).
	\item Пользуясь алгоритмом перебора пар получаем ответ.
\end{enumerate}

Такой порядок действий обусловлен следующими соображениями: в процессе редукций не может быть увеличено число компонент связности, поэтому мы можем выделить их ещё на первом этапе. При обнаружении цепи-моста обработка мостов будет обрабатывать каждую вершину цепи, что существенно уступает обработке стянутой цепи, поэтому сначала идёт стягивание цепей и только за ней обработка мостов.

\section{Реализация алгоритмов и численные эксперименты}
Было реализовано 6 версий алгоритма:

\begin{enumerate}
	\item Алгоритм перебора пар на базе алгоритма Эдмондса-Карпа.
	\item Алгоритм перебора пар на базе алгоритма Диница.
	\item Алгоритм перебора пар на базе алгоритма проталкивания предпотока.
	\item Алгоритм с использованием редукций на базе алгоритма Эдмондса-Карпа.
	\item Алгоритм с использованием редукций на базе алгоритма Диница.
	\item Алгоритм с использованием редукций на базе алгоритма проталкивания предпотока.
\end{enumerate}

\begin{table}[ht!]\caption{Результаты экспериментов}\label{T:1}
	\centering
	\begin{tabular}{c|c|c|c|c|c|c}
		\hline
		Версия алгоритма & 1 & 2 & 3 & 4 & 5 & 6\\
		\hline
		(50,55) & 0,127 & 0,289 & 0,65 & 0,051 & 0,091 & 0,15 \\
		(60,80) & 0,31 & 0,786  & 1,52 & 0,162 & 0,681 & 1,25 \\
		(100,120) & 2,12 & 5,35 & 63,61 & 0,9 & 1,76 & 9,59 \\
		(150,190) & 10,6 & 29,20 & 470,56 & 3,46 & 10,48 & 98,35 \\
	\end{tabular}
\end{table}




Используемый процессор - Intel(R) Core(TM) i3-4030U CPU @ 1.90GHz количество оперативной памяти - 8GB.
Были случайным образом были сгенерированы 30 графов для каждой пары (количество вершин, количество рёбер) со случайными пропускными способностями в интервале (1, 100). В таблицу \ref{T:1} занесено среднее арифметическое времени расчёта в секундах.


\section{Заключение}
В данной работе был рассмотрен такой показатель функциональности сети, как матрица величин поток между всеми парами вершин в графе.
Для расчёта этого показателя был реализован алгоритм перебора пар и его модификации, которые ускорили алгоритм.

Таким образом, были решены следующие задачи:
\begin{enumerate}
	\item Разработан алгоритм точного расчёта.
	\item Предложены и реализованы различные методы ускорения вычислений.
\end{enumerate}

В результате численных экспериментов были получены следующие результаты:
\begin{enumerate}
	\item Алгоритм Эдмондса-Карпа показывает наилучшую производительность как в переборе пар, так и использовании редукций.
	\item Получен существенный выигрыш по сравнению с перебором пар, который увеличивается с увеличением размерности.
\end{enumerate}

Была заложена программная основа для дальнейших исследований, которые будут проводиться по следующим направлениям:
\begin{enumerate}
	\item Решение задач поставленных в магистерской работе.
	\item Поиск и анализ новых методов редукций.
	\item Усовершенствование разработанных алгоритмов.
\end{enumerate}

\begin{thebibliography}{99}	
\bibliographystyle{abbrv}
\bibitem{Werner}
G. Werner-Allen, K. Lorincz, M. Welsh, O. Marcillo, J. Johnson, M. Ruiz, and
J. Lees. Deploying a wireless sensor network on an active volcano. IEEE Internet Computing, 10:18–25, 2006.

\bibitem{Kikiras}
P. Kikiras and J. Avaritsiotis. Unattended ground sensor network for force protection. Journal of Battlefield Technology, 7(3):29–34, 2004.


\bibitem{Szewczyk}
R. Szewczyk, J. Polastre, A. Mainwaring, and D. Culler. Lessons from a sensor
network expedition. In First European Workshop on Wireless Sensor Networks,
pages 307–322, 2004.

\bibitem{Liu}
Liu Sh., Cheng K., Liu X. Network reliability with node failures // Networks. 2000. V. 35.
P. 109–117

\bibitem{Valiant}
Leslie G. Valiant
The Complexity of enumeration and reliability problems / Valiant Leslie G. // Society for Industrial and Applied Mathematics. -1979. -№3. - P.410-421.

\bibitem{Moore}
Moore E.F., Shannon C.E.
Reliable Circuits Using Less Reliable Relays // J. Franclin Inst., Vol. 262, n. 4b, 1956. P. 191–208.

\bibitem{Dinic}
Dinic E.A.
Algorithm for Solution of a Problem of Maximum Flow in a Network with Power Estimation / E.A. Dinic // Soviet Math Dokladv, - 1970. Vol. 11. - P. 1277-1280.

\bibitem{Goldberg}
Goldberg A.V. A new approach to the maximum flow problem / A.V. Goldberg // Journal of the ACM. - 1988. - Vol. 35. - P. 921-940.

\bibitem{Shooman}
Shooman A. M. Algorithms for network reliability and connection availability analysis //
Electro/95 Intern. Prof. Program Proc. Hynes Convention Center, Boston, MA, June 21–23, 1995. S. l.: IEEE, 1995. P. 309–333

\bibitem{Migov}
Мигов Д.А. Об одном показателе надёжности для сетей с отказами узлов / Д.А. Мигов // Средства и системы защиты информации и сетевых ресурсов. -2013. -№2. -С.43-48.

\bibitem{Rodionovy}
Родионов А.С., Родионова О.К. К вопросу практического использования формулы Муры-Шеннона для расчета вероятности связности локальных сетей // Тр. 2 Междунар. науч.-практ. конф. «Информационные технологии и радиосети», ИНФОРАДИО-2000. Омск, 2000. С. 67-69.

\end{thebibliography}

\end{document}
